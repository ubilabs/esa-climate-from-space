import { FunctionComponent, useState } from "react";
import { useSelector } from "react-redux";

import config from "../../../config/main";
import { useThunkDispatch } from "../../../hooks/use-thunk-dispatch";
import { embedElementsSelector } from "../../../selectors/embed-elements-selector";
import { languageSelector } from "../../../selectors/language";
import { selectedTagsSelector } from "../../../selectors/story/selected-tags";
import SelectedTags from "../../stories/selected-tags/selected-tags";
import Button from "../button/button";
import { FilterIcon } from "../icons/filter-icon";
import { MenuIcon } from "../icons/menu-icon";
import LanguageTooltip from "../language-tooltip/language-tooltip";
import Menu from "../menu/menu";
import Overlay from "../overlay/overlay";
import { setWelcomeScreen } from "../../../reducers/welcome-screen";

import styles from "./navigation.module.css";
import { setLanguage } from "../../../reducers/language";

const Navigation: FunctionComponent = () => {
  const dispatch = useThunkDispatch();
  const [showMenu, setShowMenu] = useState(false);
  const [showTags, setShowTags] = useState(false);
  const selectedLanguage = useSelector(languageSelector);
  const savedLanguage = localStorage.getItem(config.localStorageLanguageKey);
  const selectedTags = useSelector(selectedTagsSelector);
  const { stories_menu, app_menu } = useSelector(embedElementsSelector);

  const [showTooltip, setShowTooltip] = useState(Boolean(!savedLanguage));

  const NewLogo: FunctionComponent = () => (
    <a
      target="_blank"
      rel="noopener noreferrer"
      href="https://climate.esa.int"
      className={styles.logoLink}
    >
      <svg
        width="265"
        height="39"
        viewBox="0 0 265 39"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_ddd)">
          <path
            d="M61.131 16.694C59.8984 16.5073 58.4762 16.414 57.7176 15.574C57.4332 15.2007 57.4332 14.6407 57.6228 14.2673C58.0969 13.2407 59.3295 13.054 60.5621 13.054C61.605 13.054 62.4584 13.614 62.9325 14.454C63.1221 14.8273 63.1221 15.2007 63.2169 15.6673H66.6303C66.6303 14.3607 66.1561 13.1473 65.3976 12.1207C63.5961 10.6273 61.2258 9.97401 58.9503 10.4407C56.9592 10.6273 55.1576 11.8407 54.3991 13.7073C53.7354 15.3873 54.2095 17.254 55.6318 18.374C57.1488 19.5873 60.0881 19.774 61.3207 20.054C62.6481 20.334 63.3118 20.5207 63.5962 21.2673C63.691 21.734 63.691 22.294 63.4065 22.6673C62.5532 23.7873 60.7518 23.8807 59.4244 23.5073C58.1918 23.134 57.8125 22.294 57.5281 20.9873H53.925C53.925 22.014 54.2095 23.0407 54.8732 23.8807C55.8213 25.2807 57.3384 26.214 58.9503 26.4007C60.8466 26.774 62.9325 26.5873 64.734 25.7473C65.3977 25.374 66.0614 24.814 66.5355 24.1607C67.5784 22.6673 67.6732 20.614 66.7251 19.0273C65.4925 17.3473 63.2169 16.974 61.131 16.694ZM49.4688 12.494C47.7621 10.7207 45.3917 9.97401 43.0213 10.3473C40.9354 10.6273 39.0392 11.934 37.9962 13.8007C37.4273 14.8273 37.048 15.9473 36.7636 17.1607C36.3843 19.8673 37.1428 24.4407 42.0732 26.214C44.5384 27.054 47.2881 26.6807 49.374 25.1873C50.7014 24.1607 51.5547 22.6673 51.934 21.0807H47.9518C47.7622 21.8273 47.3829 22.4807 46.7191 22.854C45.3917 23.694 43.6851 23.6007 42.4525 22.6673C41.2199 21.734 40.8407 20.334 40.8407 18.1873C40.8407 17.0673 41.125 15.294 42.0732 14.454C43.0213 13.614 44.4436 13.334 45.6762 13.7073C47.0036 14.174 47.9517 15.4807 47.8569 16.8807H42.168V19.6807H52.0288C52.0288 18.654 52.0288 17.7207 51.7444 16.694C51.1755 15.2007 50.4169 13.8007 49.4688 12.494ZM82.8436 22.294V17.4407C82.9384 16.2273 82.8436 15.014 82.5592 13.8007C82.2747 12.5873 81.3266 10.7207 77.9132 10.254H75.9222C74.7844 10.254 73.6466 10.4407 72.6036 10.814C70.7073 11.654 69.4747 13.5207 69.5695 15.574H73.2673C73.1725 14.6407 73.7414 13.7073 74.5947 13.334C74.974 13.2407 75.3532 13.1473 75.8273 13.1473C76.6806 13.054 77.6288 13.334 78.2925 13.894C78.6718 14.2673 78.8613 14.9207 78.6717 15.3873C78.4821 16.3207 77.4391 16.6007 75.8273 16.7873C75.2584 16.8807 74.5947 16.8807 74.0259 16.974C72.1296 17.1607 69.3798 18.1873 68.7161 20.8007C68.4317 22.3873 69.0955 24.0673 70.3281 25.094C71.4658 25.934 72.888 26.3073 74.2154 26.3073C74.6895 26.3073 75.2584 26.3073 75.7325 26.214C76.9651 25.934 78.008 25.374 78.9562 24.6273C79.051 25.094 79.1458 25.4673 79.4303 25.8407H83.2229C82.9384 24.7207 82.7488 23.5073 82.8436 22.294ZM78.8614 21.734C78.3873 22.854 77.1548 23.6007 75.9222 23.5073C75.6377 23.5073 75.3533 23.5073 74.974 23.5073C74.1207 23.5073 73.3621 23.134 72.9828 22.3873C72.6984 21.8273 72.7933 21.174 73.0777 20.7073C73.6466 19.774 74.4999 19.5873 75.9222 19.4007C76.3962 19.4007 76.8702 19.3073 77.2495 19.1207C77.9132 19.0273 78.4821 18.8407 78.9562 18.374C79.051 19.5873 78.9562 20.7073 78.8614 21.734ZM22.731 4.46735C15.1458 2.60068 7.371 7.17401 5.4747 14.6407C3.5784 22.1073 8.22435 29.7607 15.8095 31.6273C21.0244 32.934 26.5236 31.1607 30.0318 27.1473C28.3251 27.5207 26.5236 27.4273 24.9117 26.8673C18.5591 24.7207 17.3265 18.8407 18.9384 14.8273C20.5502 11.094 24.9117 9.32068 28.7043 10.9073C29.1784 11.094 29.5577 11.2807 29.937 11.5607C33.7296 14.2673 33.4451 19.4007 33.4451 19.494C34.1088 12.494 29.5576 6.14735 22.731 4.46735ZM11.4481 19.9607C10.4051 19.9607 9.64658 19.1207 9.64658 18.1873C9.64658 17.254 10.4999 16.414 11.4481 16.414C12.3962 16.414 13.2495 17.254 13.2495 18.1873C13.2495 19.214 12.491 19.9607 11.4481 19.9607ZM23.3947 16.7873H29.1784C29.1784 15.9473 28.8939 15.2007 28.325 14.6407C27.2821 13.4273 25.4806 13.1473 24.0584 13.894C22.9206 14.454 21.4985 16.8807 22.3518 20.334C23.3947 23.8807 27.377 24.4407 29.937 23.7873C31.2644 23.3207 32.3073 22.4807 33.0658 21.3607C33.2554 20.8007 33.3503 20.1473 33.3503 19.5873H23.4895L23.3947 16.7873Z"
            fill="white"
          ></path>
          <path
            d="M105.355 25.7849V24.7856C105.355 24.5413 105.174 24.4303 104.926 24.4525C104.926 24.4525 103.55 24.6524 102.648 24.6524C100.504 24.6524 99.7149 23.0313 99.7149 21.3213V15.3255C99.7149 13.6155 100.527 11.9944 102.648 11.9944C103.663 11.9944 104.926 12.1943 104.926 12.1943C105.174 12.2165 105.355 12.1055 105.355 11.8612V10.8841C105.355 10.6398 105.219 10.5288 104.949 10.4622C104.949 10.4622 103.798 10.2179 102.58 10.2179C99.2637 10.2179 97.7974 12.372 97.7974 15.3255V21.3213C97.7974 24.2749 99.2863 26.4289 102.58 26.4289C103.708 26.4289 104.949 26.2069 104.949 26.2069C105.219 26.1402 105.355 26.0292 105.355 25.7849Z"
            fill="white"
          ></path>
          <path
            d="M109.177 25.7849V10.8619C109.177 10.6176 108.996 10.44 108.748 10.44H107.688C107.44 10.44 107.259 10.6176 107.259 10.8619V25.7849C107.259 26.0292 107.44 26.2069 107.688 26.2069H108.748C108.996 26.2069 109.177 26.0292 109.177 25.7849Z"
            fill="white"
          ></path>
          <path
            d="M113.88 11.9056V10.8619C113.88 10.6176 113.699 10.44 113.451 10.44H112.391C112.143 10.44 111.962 10.6176 111.962 10.8619V11.9056C111.962 12.1499 112.143 12.3276 112.391 12.3276H113.451C113.699 12.3276 113.88 12.1499 113.88 11.9056ZM113.88 25.7849V15.5253C113.88 15.2811 113.699 15.1034 113.451 15.1034H112.391C112.143 15.1034 111.962 15.2811 111.962 15.5253V25.7849C111.962 26.0292 112.143 26.2069 112.391 26.2069H113.451C113.699 26.2069 113.88 26.0292 113.88 25.7849Z"
            fill="white"
          ></path>
          <path
            d="M130.765 25.7849V18.6565C130.765 16.3248 129.93 14.8813 127.562 14.8813C125.87 14.8813 124.787 15.703 124.223 16.2804C123.749 15.3699 122.892 14.8813 121.471 14.8813C120.162 14.8813 119.215 15.3921 118.583 15.8807V15.5253C118.583 15.2811 118.403 15.1034 118.154 15.1034H117.094C116.846 15.1034 116.666 15.2811 116.666 15.5253V25.7849C116.666 26.0292 116.846 26.2069 117.094 26.2069H118.154C118.403 26.2069 118.583 26.0292 118.583 25.7849V17.5018C119.282 17.102 120.185 16.6801 121.042 16.6801C122.463 16.6801 122.757 17.4796 122.757 18.6565V25.7849C122.757 26.0292 122.937 26.2069 123.185 26.2069H124.246C124.494 26.2069 124.674 26.0292 124.674 25.7849V18.6565C124.674 18.3234 124.674 17.9903 124.629 17.7016C125.306 17.1909 126.208 16.6801 127.133 16.6801C128.554 16.6801 128.848 17.4796 128.848 18.6565V25.7849C128.848 26.0292 129.028 26.2069 129.276 26.2069H130.337C130.585 26.2069 130.765 26.0292 130.765 25.7849Z"
            fill="white"
          ></path>
          <path
            d="M140.779 25.7849V18.7675C140.779 16.1915 139.673 14.8813 137.011 14.8813C135.161 14.8813 133.875 15.3477 133.875 15.3477C133.605 15.4143 133.447 15.5698 133.447 15.814V16.6579C133.447 16.9022 133.56 17.0798 133.875 17.0132C133.875 17.0132 135.364 16.6579 136.831 16.6579C138.342 16.6579 138.861 17.4573 138.861 18.7675V19.9445C138.861 19.9445 137.35 19.8335 136.56 19.8335C134.101 19.8335 132.77 20.8772 132.77 23.2089C132.77 25.2742 133.988 26.4289 136.154 26.4289C137.237 26.4289 138.162 26.007 138.861 25.5407V25.7849C138.861 26.0292 139.042 26.2069 139.29 26.2069H140.35C140.598 26.2069 140.779 26.0292 140.779 25.7849ZM138.861 24.0084C138.117 24.3859 137.192 24.7634 136.38 24.7634C135.252 24.7634 134.688 24.186 134.688 23.2089C134.688 22.032 135.229 21.4324 136.605 21.4324H138.861V24.0084Z"
            fill="white"
          ></path>
          <path
            d="M148.981 25.8293V24.9411C148.981 24.6968 148.868 24.5858 148.62 24.608C148.62 24.608 147.74 24.7634 147.018 24.7634C146.274 24.7634 145.823 24.2971 145.823 23.4754V16.6579H148.553C148.801 16.6579 148.981 16.4802 148.981 16.236V15.5253C148.981 15.2811 148.801 15.1034 148.553 15.1034H145.823V12.6384C145.823 12.3942 145.642 12.2165 145.394 12.2165H144.334C144.086 12.2165 143.905 12.3942 143.905 12.6384V15.1034H142.755C142.507 15.1034 142.326 15.2811 142.326 15.5253V16.236C142.326 16.4802 142.507 16.6579 142.755 16.6579H143.905V23.431C143.905 25.6739 145.101 26.4289 146.612 26.4289C147.425 26.4289 148.553 26.2513 148.553 26.2513C148.823 26.2291 148.981 26.0736 148.981 25.8293Z"
            fill="white"
          ></path>
          <path
            d="M157.857 20.8994V19.4782C157.857 16.88 156.774 14.8813 153.977 14.8813C151.112 14.8813 149.848 16.88 149.848 20.1222V21.0549C149.848 24.8967 151.721 26.4289 154.405 26.4289C155.601 26.4289 156.977 26.1402 156.977 26.1402C157.248 26.0736 157.406 25.9404 157.406 25.6961V24.7634C157.406 24.5191 157.225 24.3859 156.977 24.4081C156.977 24.4081 155.556 24.6968 154.473 24.6968C152.826 24.6968 151.811 23.6531 151.766 21.3213H157.428C157.676 21.3213 157.857 21.1437 157.857 20.8994ZM156.007 19.8335H151.766C151.788 17.9237 152.195 16.4802 153.999 16.4802C155.646 16.4802 156.007 17.9459 156.007 19.4115V19.8335Z"
            fill="white"
          ></path>
          <path
            d="M171.336 11.728V10.8397C171.336 10.5954 171.201 10.44 170.908 10.3733C170.908 10.3733 170.299 10.2179 169.532 10.2179C167.862 10.2179 166.937 11.084 166.937 12.9938V15.1034H165.787C165.539 15.1034 165.358 15.2811 165.358 15.5253V16.236C165.358 16.4802 165.539 16.6579 165.787 16.6579H166.937V25.7849C166.937 26.0292 167.118 26.2069 167.366 26.2069H168.426C168.674 26.2069 168.855 26.0292 168.855 25.7849V16.6579H170.457C170.705 16.6579 170.885 16.4802 170.885 16.236V15.5253C170.885 15.2811 170.705 15.1034 170.457 15.1034H168.855V13.0604C168.855 12.2387 169.238 11.9944 169.757 11.9944C170.321 11.9944 170.908 12.0611 170.908 12.0611C171.178 12.0833 171.336 11.9722 171.336 11.728Z"
            fill="white"
          ></path>
          <path
            d="M177.301 16.5691V15.3699C177.301 15.1256 177.188 14.948 176.917 14.9258C176.917 14.9258 176.691 14.8813 176.534 14.8813C175.225 14.8813 174.526 15.703 174.142 16.5469V15.5253C174.142 15.2811 173.962 15.1034 173.714 15.1034H172.653C172.405 15.1034 172.225 15.2811 172.225 15.5253V25.7849C172.225 26.0292 172.405 26.2069 172.653 26.2069H173.714C173.962 26.2069 174.142 26.0292 174.142 25.7849V18.7009C174.639 17.8349 175.451 16.9244 176.601 16.9244C176.895 16.9244 176.917 16.9466 176.917 16.9466C177.165 16.9688 177.301 16.8133 177.301 16.5691Z"
            fill="white"
          ></path>
          <path
            d="M186.432 22.4317V18.8786C186.432 16.3914 185.033 14.8813 182.439 14.8813C179.845 14.8813 178.423 16.3914 178.423 18.8786V22.4317C178.423 24.9189 179.845 26.4289 182.439 26.4289C185.033 26.4289 186.432 24.9189 186.432 22.4317ZM184.514 22.4317C184.514 23.6975 183.973 24.7634 182.439 24.7634C180.882 24.7634 180.341 23.6975 180.341 22.4317V18.8786C180.341 17.6128 180.905 16.5469 182.439 16.5469C183.996 16.5469 184.514 17.6128 184.514 18.8786V22.4317Z"
            fill="white"
          ></path>
          <path
            d="M203.111 25.7849V18.6565C203.111 16.3248 202.276 14.8813 199.908 14.8813C198.216 14.8813 197.133 15.703 196.569 16.2804C196.095 15.3699 195.238 14.8813 193.817 14.8813C192.508 14.8813 191.561 15.3921 190.929 15.8807V15.5253C190.929 15.2811 190.748 15.1034 190.5 15.1034H189.44C189.192 15.1034 189.011 15.2811 189.011 15.5253V25.7849C189.011 26.0292 189.192 26.2069 189.44 26.2069H190.5C190.748 26.2069 190.929 26.0292 190.929 25.7849V17.5018C191.628 17.102 192.531 16.6801 193.388 16.6801C194.809 16.6801 195.102 17.4796 195.102 18.6565V25.7849C195.102 26.0292 195.283 26.2069 195.531 26.2069H196.591C196.839 26.2069 197.02 26.0292 197.02 25.7849V18.6565C197.02 18.3234 197.02 17.9903 196.975 17.7016C197.652 17.1909 198.554 16.6801 199.479 16.6801C200.9 16.6801 201.193 17.4796 201.193 18.6565V25.7849C201.193 26.0292 201.374 26.2069 201.622 26.2069H202.682C202.931 26.2069 203.111 26.0292 203.111 25.7849Z"
            fill="white"
          ></path>
          <path
            d="M220.531 22.1652V21.499C220.531 18.7898 218.884 17.9015 217.238 17.3241L215.794 16.8133C214.756 16.458 213.989 15.9251 213.989 14.8369V14.2818C213.989 12.7273 214.982 11.9944 216.696 11.9944C218.162 11.9944 219.877 12.3498 219.877 12.3498C220.17 12.372 220.306 12.2609 220.306 12.0167V11.0396C220.306 10.7953 220.17 10.662 219.877 10.5954C219.877 10.5954 218.32 10.2179 216.651 10.2179C213.966 10.2179 212.071 11.5725 212.071 14.2818V14.8369C212.071 17.2131 213.493 18.0347 215.004 18.5677L216.471 19.0784C217.802 19.5448 218.614 20.0111 218.614 21.499V22.1652C218.614 23.964 217.395 24.6524 215.681 24.6524C214.35 24.6524 212.387 24.1638 212.387 24.1638C212.094 24.1194 211.959 24.2527 211.959 24.4969V25.5184C211.959 25.7627 212.094 25.896 212.387 25.9626C212.387 25.9626 214.124 26.4289 215.861 26.4289C218.636 26.4289 220.531 25.2964 220.531 22.1652Z"
            fill="white"
          ></path>
          <path
            d="M231.111 22.6538V18.6565C231.111 16.3248 229.961 14.8813 227.502 14.8813C226.532 14.8813 225.674 15.2367 225.02 15.6364V15.5253C225.02 15.2811 224.84 15.1034 224.592 15.1034H223.531C223.283 15.1034 223.103 15.2811 223.103 15.5253V30.0042C223.103 30.2485 223.283 30.4262 223.531 30.4262H224.592C224.84 30.4262 225.02 30.2485 225.02 30.0042V26.0514C225.81 26.1402 226.69 26.2069 227.141 26.2069C229.735 26.2069 231.111 25.0743 231.111 22.6538ZM229.194 22.6538C229.194 23.8307 228.585 24.5413 227.051 24.5413H225.02V17.1909C225.72 16.8578 226.532 16.5469 227.276 16.5469C228.652 16.5469 229.194 17.4796 229.194 18.6565V22.6538Z"
            fill="white"
          ></path>
          <path
            d="M241.135 25.7849V18.7675C241.135 16.1915 240.03 14.8813 237.368 14.8813C235.518 14.8813 234.232 15.3477 234.232 15.3477C233.961 15.4143 233.804 15.5698 233.804 15.814V16.6579C233.804 16.9022 233.916 17.0798 234.232 17.0132C234.232 17.0132 235.721 16.6579 237.187 16.6579C238.699 16.6579 239.218 17.4573 239.218 18.7675V19.9445C239.218 19.9445 237.706 19.8335 236.917 19.8335C234.458 19.8335 233.127 20.8772 233.127 23.2089C233.127 25.2742 234.345 26.4289 236.511 26.4289C237.594 26.4289 238.518 26.007 239.218 25.5407V25.7849C239.218 26.0292 239.398 26.2069 239.646 26.2069H240.707C240.955 26.2069 241.135 26.0292 241.135 25.7849ZM239.218 24.0084C238.473 24.3859 237.548 24.7634 236.736 24.7634C235.608 24.7634 235.044 24.186 235.044 23.2089C235.044 22.032 235.586 21.4324 236.962 21.4324H239.218V24.0084Z"
            fill="white"
          ></path>
          <path
            d="M250.017 25.7627V24.8522C250.017 24.608 249.882 24.4969 249.611 24.5191C249.611 24.5191 248.641 24.6524 247.761 24.6524C246.205 24.6524 245.618 23.6975 245.618 22.4317V18.8786C245.618 17.6128 246.227 16.6579 247.761 16.6579C248.641 16.6579 249.566 16.7911 249.566 16.7911C249.837 16.8133 250.017 16.7023 250.017 16.458V15.5475C250.017 15.3033 249.882 15.1034 249.589 15.0812C249.589 15.0812 248.709 14.8813 247.649 14.8813C245.054 14.8813 243.701 16.3914 243.701 18.8786V22.4317C243.701 24.9189 245.054 26.4289 247.649 26.4289C248.573 26.4289 249.589 26.2291 249.589 26.2291C249.905 26.1624 250.017 26.007 250.017 25.7627Z"
            fill="white"
          ></path>
          <path
            d="M259.469 20.8994V19.4782C259.469 16.88 258.387 14.8813 255.589 14.8813C252.724 14.8813 251.461 16.88 251.461 20.1222V21.0549C251.461 24.8967 253.333 26.4289 256.018 26.4289C257.213 26.4289 258.59 26.1402 258.59 26.1402C258.86 26.0736 259.018 25.9404 259.018 25.6961V24.7634C259.018 24.5191 258.838 24.3859 258.59 24.4081C258.59 24.4081 257.168 24.6968 256.085 24.6968C254.439 24.6968 253.423 23.6531 253.378 21.3213H259.041C259.289 21.3213 259.469 21.1437 259.469 20.8994ZM257.62 19.8335H253.378C253.401 17.9237 253.807 16.4802 255.612 16.4802C257.259 16.4802 257.62 17.9459 257.62 19.4115V19.8335Z"
            fill="white"
          ></path>
        </g>
        <defs>
          <filter
            id="filter0_ddd"
            x="0.0507812"
            y="0.0500488"
            width="264.418"
            height="39.0014"
            filterUnits="userSpaceOnUse"
            colorInterpolationFilters="sRGB"
          >
            <feFlood floodOpacity="0" result="BackgroundImageFix"></feFlood>
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            ></feColorMatrix>
            <feOffset dy="1"></feOffset>
            <feGaussianBlur stdDeviation="2.5"></feGaussianBlur>
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
            ></feColorMatrix>
            <feBlend
              mode="normal"
              in2="BackgroundImageFix"
              result="effect1_dropShadow"
            ></feBlend>
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            ></feColorMatrix>
            <feOffset dy="3"></feOffset>
            <feGaussianBlur stdDeviation="2"></feGaussianBlur>
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"
            ></feColorMatrix>
            <feBlend
              mode="normal"
              in2="effect1_dropShadow"
              result="effect2_dropShadow"
            ></feBlend>
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            ></feColorMatrix>
            <feOffset dy="2"></feOffset>
            <feGaussianBlur stdDeviation="2"></feGaussianBlur>
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.14 0"
            ></feColorMatrix>
            <feBlend
              mode="normal"
              in2="effect2_dropShadow"
              result="effect3_dropShadow"
            ></feBlend>
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="effect3_dropShadow"
              result="shape"
            ></feBlend>
          </filter>
        </defs>
      </svg>
    </a>
  );

  return (
    <>
      <nav className={styles.navigation}>
        <span>
          <NewLogo />
        </span>

        {stories_menu && (
          <div className={styles.storiesContainer}>
            {selectedTags.length > 0 && (
              <div className={styles.tagsContainer}>
                <Button
                  className={styles.tagsButton}
                  icon={FilterIcon}
                  onClick={() => setShowTags(!showTags)}
                />
                <div className={styles.badge} />
                {selectedTags.length > 0 && showTags && (
                  <SelectedTags selectedTags={selectedTags} />
                )}
              </div>
            )}
          </div>
        )}

        {app_menu && (
          <Button
            className={styles.button}
            id="ui-menu"
            icon={MenuIcon}
            onClick={() => setShowMenu(true)}
            hideLabelOnMobile
          />
        )}
      </nav>

      {showTooltip && (
        <LanguageTooltip
          onMenuOpen={() => setShowMenu(true)}
          onClose={() => {
            setShowTooltip(false);
            dispatch(setLanguage(selectedLanguage));
            // setShowTooltip(false);
          }}
        />
      )}
      {showMenu && (
        <Overlay onClose={() => setShowMenu(false)}>
          <Menu
            onRestartOnboarding={() => {
              setShowMenu(false);
              dispatch(setWelcomeScreen(false));
            }}
          />
        </Overlay>
      )}
    </>
  );
};

export default Navigation;
